<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			
			// ActionScript file
			import com.facebook.graph.FacebookDesktop;
			
			import mx.events.*;
			import flash.events.*;
			
			protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				FacebookDesktop.init("283561771688383", loginHandler);
				
			}
			
			protected function loginHandler(success:Object,fail:Object):void
			{
				if(success)
				{
					/*currentState="loggedin";
					nameLbl.text = success.user.name;
					userImg.source = FacebookDesktop.getImageUrl(success.uid, "small");
					birthdayLbl.text = success.user.birthday;
					FacebookDesktop.api("/me/statuses", getStatusHandler);*/
					
				}
			}
			
			protected function login_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				
			}
			
			protected function getStatusHandler(success:Object, failure:Object):void
			{
				if(success)
				{
					//statusLbl.text = success[0].message;
				}
			}
			
			protected function login():void
			{
				FacebookDesktop.login(loginHandler, ["user_birthday", "read_stream"]);
			}
			
			protected function logout():void
			{
				// TODO Auto-generated method stub
				FacebookDesktop.logout();
				//currentState="loggedout";
				
			}

		]]>
	</fx:Script>
	<s:states>
		<s:State name="loggedout"/>
		<s:State name="loggedin"/>
	</s:states>
	<s:Button id="loginoutBtn" right="10" top="10" label="Log In" skinClass="skins.FBLogoutButtonSkin"
			  label.loggedin="Log Out" click.loggedin="logout()"
			  label.loggedout="Log In" click.loggedout="login()"
			  skinClass.loggedin="skins.FBLogoutButtonSkin"
			  skinClass.loggedout="skins.FBLoginButtonSkin"/>
</s:WindowedApplication>
